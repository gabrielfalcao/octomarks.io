{% extends "base.html" %}

{% block body %}
<div class="container">
  {% include "logo.html" %}
  <div class="row-fluid">
    <div class="span5 offset3">
      <h2>Save a bookmark</h2>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span5 offset3">
      <input id="uri" class="classy-input" type="text" name="bookmark_url" placeholder="http://github.com/username/project" />
    </div>
  </div>
  <div class="row-fluid">
    <div class="span8">
      <input type="button" id="main-save" class="btn btn-large btn-warning" name="action" value="save" disabled="true" />
    </div>
  </div>
  {% if True == False %}
  <div class="bookmarklet-container">
    <br />
    <br />
    <div class="row-fluid">
      <div class="span6 offset3">
        <input type="button" class="btn btn-large" value="btn btn-large" />
        <input type="button" class="btn" value="btn" />
        <input type="button" class="btn btn-large btn-success" value="btn-success" />
        <input type="button" class="btn btn-success" value="btn-success" />
        <input type="button" class="btn btn-large btn-warning" value="btn-warning" />
        <input type="button" class="btn btn-warning" value="btn-warning" />
        <input type="button" class="btn btn-large btn-primary" value="btn-primary" />
        <input type="button" class="btn btn-primary" value="btn-primary" />
      </div>
    </div>
  </div>
  {% endif %}
  {% if user.gb_token == "REMOVEME" %}
    <a class="btn btn-success btn-large" href="javascript: (function () {var GBKLET=document.createElement('script');GBKLET.setAttribute('src', '{{ full_url_for(".serve_bookmarklet", token=user.gb_token) }}?' + (new Date()).getTime());document.body.appendChild(GBKLET);}());">save github favorite</a>
  {% endif %}

</div>

<script type="text/javascript">
(function($){
  $("#main-save").on("click", function(){
    location.href='{{ settings.absurl(url_for(".save_bookmark", token=user.gb_token)) }}?uri=' + encodeURIComponent($("#uri").val());
  });

  function enable_save(){
    var text = $(this).val().trim();
    if (text.length > 0) {
      $("#main-save").removeAttr("disabled");
    } else {
      $("#main-save").attr("disabled", "disabled");
    }
  }

  $("#uri").on("keyup", enable_save);
  $("#uri").on("keydown", enable_save);
  $("#uri").on("mouseup", enable_save);
  $("#uri").on("mousedown", enable_save);

})(window.jQuery);
</script>
{% endblock %}
