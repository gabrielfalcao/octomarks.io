{% extends "base.html" %}

{% block body %}
<div class="container">
  {% include "logo.html" %}

  <div class="row-fluid">
    <div class="span12">
      {% if is_self %}
      <h2>Your bookmarks</h2>
{% else %}
      <h2>{{ user.username }}'{{ user.username.endswith("s") and "" or "s" }} bookmarks</h2>
{% endif %}
      <br />
      <table class="table table-hover">
        <thead>
          <tr>
            <th>project</th>
            <th>owner</th>
            <th>tags</th>
          </tr>
        </thead>
        <tbody>
           {% for bookmark in bookmarks %}
          <tr data-tags="{{ bookmark.tags_as_json().replace('"', "'")|safe }}">
            <td><a href="{{ bookmark.url }}" class="btn-btn-inverse">{{ RepositoryURIInfo(bookmark.url).project }}</a></td>
            <td><a href="https://github.com/{{ RepositoryURIInfo(bookmark.url).owner }}" class="btn-btn-inverse">{{ RepositoryURIInfo(bookmark.url).owner }}</a></td>
            <td>
              {% for tag in bookmark.tags %}
              <span class="badge badge-{{ loop.cycle('info', 'success', 'inverse', 'warning', 'important', 'primary') }}">{{ tag.name }}</span>
              {% endfor %}
            </td>
          </tr>
           {% endfor %}
        </tbody>
      </table>
    </div>
  </div>




  <script type="text/javascript">
  (function($){
    $("#main-save").on("click", function(){
      location.href='{{ full_url_for(".save_bookmark", token=user.gb_token) }}?uri=' + encodeURIComponent($("#uri").val());
    });
    $("#uri").on("keyup", function(){
      var text = $(this).val().trim();
      if (text.length > 0) {
        $("#main-save").removeAttr("disabled");
      } else {
        $("#main-save").attr("disabled", "disabled");
      }
    });
  })(window.jQuery);
  </script>
{% endblock %}
